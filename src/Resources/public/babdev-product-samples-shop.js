(()=>{"use strict";function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.button=t,this.buttonMessageContainer=this.button.querySelector(".button-message")}var a,n,s;return a=e,s=[{key:"maybeInit",value:function(){var t=document.getElementById("sylius_add_to_cart_requestSample");null!==t&&new e(t).init()}}],(n=[{key:"init",value:function(){var t=this;null!==document.getElementById("sylius-variants-pricing")?document.querySelectorAll('[name*="sylius_add_to_cart[cartItem][variant]"]').forEach((function(e){e.addEventListener("change",(function(e){return t.handleProductOptionsChange(e)}))})):null!==document.getElementById("sylius-product-variants")?document.querySelectorAll('[name="sylius_add_to_cart[cartItem][variant]"]').forEach((function(e){e.addEventListener("change",(function(e){return t.handleProductVariantsChange(e)}))})):console.log("no init")}},{key:"handleProductOptionsChange",value:function(t){var e,a=document.getElementById("sylius-variants-pricing"),n="";document.querySelectorAll("#sylius-product-adding-to-cart select[data-option]").forEach((function(t){var e=t.options[t.options.selectedIndex];n+="[data-".concat(t.dataset.option,'="').concat(e.value,'"]')}));var s,l=a.querySelector(n);if(null!==l)if("yes"===(null!==(e=l.dataset.freeSample)&&void 0!==e&&e)){var i,u;this.updateButtonDisplayText(null!==(i=null!==(u=this.button.dataset.freeSampleMessage)&&void 0!==u?u:this.button.dataset.sampleMessage)&&void 0!==i?i:"Request a Sample")}else{var o,r,d,c,p=null!==(o=l.dataset.samplePrice)&&void 0!==o?o:null;null!==p?this.updateButtonDisplayText((null!==(r=null!==(d=this.button.dataset.paidSampleMessage)&&void 0!==d?d:this.button.dataset.sampleMessage)&&void 0!==r?r:"Request a Sample").replace("%price%",p)):this.updateButtonDisplayText(null!==(c=this.button.dataset.sampleMessage)&&void 0!==c?c:"Request a Sample")}else this.updateButtonDisplayText(null!==(s=this.button.dataset.sampleMessage)&&void 0!==s?s:"Request a Sample")}},{key:"handleProductVariantsChange",value:function(t){var e,a=t.currentTarget.closest("tr").querySelector(".sylius-product-variant-price");if("yes"===(null!==(e=a.dataset.freeSample)&&void 0!==e&&e)){var n,s;this.updateButtonDisplayText(null!==(n=null!==(s=this.button.dataset.freeSampleMessage)&&void 0!==s?s:this.button.dataset.sampleMessage)&&void 0!==n?n:"Request a Sample")}else{var l,i,u,o,r=null!==(l=a.dataset.samplePrice)&&void 0!==l?l:null;null!==r?this.updateButtonDisplayText((null!==(i=null!==(u=this.button.dataset.paidSampleMessage)&&void 0!==u?u:this.button.dataset.sampleMessage)&&void 0!==i?i:"Request a Sample").replace("%price%",r)):this.updateButtonDisplayText(null!==(o=this.button.dataset.sampleMessage)&&void 0!==o?o:"Request a Sample")}}},{key:"updateButtonDisplayText",value:function(t){null!==this.buttonMessageContainer?this.buttonMessageContainer.innerText=t:this.button.innerText=t}}])&&t(a.prototype,n),s&&t(a,s),Object.defineProperty(a,"prototype",{writable:!1}),e})().maybeInit()})();